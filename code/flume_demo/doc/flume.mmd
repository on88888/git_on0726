Mind Map generated by NB MindMap plugin   
> __version__=`1.1`,showJumps=`true`
---

# flume

## 1\. 定义

### 大数据领域的一个采集框架

## 2\. 特点
> collapsed=`true`


### 高可用

### 高可靠

### 分布式

## 3\. 功能
> collapsed=`true`


### 采集

### 聚合

### 传输

## 4\. 组件

### Agent

#### 1\. flume部署单元

#### 2\. JVM进程

#### 3\. 内部包含Source、channnel、Sink

### Source

#### 1\. 将外部数据采集到flume内部，并将数据包装为事件\-\-Event

#### 2\. 主动的将事件以推送的形式放到channel中

#### 3\. 可以设置批量

#### 4\. 类型

##### avro Source

###### 主要用在多个Agent连接时使用

###### bind

##### exec Source

###### 1\. 可以执行Unix命令： cd  cat  tail

##### spooling Directory Source

###### 1\. 监控目录下的新生成文件

###### 2\. pollDelay\-\-\-500

###### 3\. 在遍历的过程中如何辨别新文件？

####### 配置后缀：fileSuffix

####### 如何连续新生成相同名字的文件会怎么？

##### netcat Source

###### 1\. netcat是linux下的端口相关的工具

###### 2\. 采集端口的数据

##### taildir  Source

###### 1\. 可以采集多个目录下的多个可追加文件

###### 2\. 可以实现断点续传的功能

###### 3\. json文件实现的，里面记录inode、pos、file绝对路径

### Channel

#### 1\.channel里面存储的是事件

#### 2\. channel是线程安全的，可以支持多个Source和多个Sink发送和读取事件

#### 3\. 类型

##### memory Channel

###### 快

###### 不安全

##### file Channel

###### 慢

###### 安全

#### capacity

##### Channel的容量

##### 个，事件的个数

#### transactionCapacity

### Sink

#### 1\. Sink不断的轮询Channel抓取事件，并批量的删除他们

#### 2\. Sink通过事务机制将事件传输到外部系统中

#### 3\. 类型

##### avro Sink

###### 主要用在多个Agent连接时使用

###### hostname

##### logger Sink

###### 将事件中的数据包装为flume的框架日志

###### ，可以通过 \-Dflume\.root\.logger=INFO,console,将flume日志数据到控制台

##### hdfs Sink

###### 1\. 将事件中数据写入到HDFS存储

##### file Sink

##### HBase

## 5\. 进阶

### 1\. Flume\-事务

#### put事务

#### take事务

### 2\. flume\-内部原理
